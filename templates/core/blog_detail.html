{% extends "base.html" %}
{% load markdown_extras %}

{% comment %}
BLOG FORMATTING VERSION: 2024-09-13-V3-FINAL-FIX
This ensures cache busting and proper deployment verification
{% endcomment %}

{% comment %}
Blog Detail Template
Displays individual blog post with proper HTML structure and styling
{% endcomment %}

{% block title %}{{ post.title }} - {{ site_config.site_name }}{% endblock %}

{% block meta_description %}{{ post.meta_description|default:post.excerpt|default:post.content|truncatewords:20 }}{% endblock %}

{% block extra_css %}
<style>
    /* ==========================================================================
       BLOG ARTICLE CONTENT STYLING
       Custom styles for blog post content with proper typography hierarchy
       ========================================================================== */

    /* Heading Styles - Proper hierarchy and spacing */
    .blog-content h1,
    .blog-content h1:first-child {
        font-size: 3rem !important;
        font-weight: 900 !important;
        margin: 3rem 0 2rem 0 !important;
        color: #1e40af !important;
        line-height: 1.2 !important;
        display: block !important;
        letter-spacing: -0.025em !important;
        text-shadow: 0 2px 4px rgba(30, 64, 175, 0.1) !important;
    }

    .blog-content h2,
    .blog-content h2:first-child {
        font-size: 2.5rem !important;
        font-weight: 900 !important;
        margin: 4rem 0 2rem 0 !important;
        color: #1e40af !important;
        line-height: 1.2 !important;
        display: block !important;
        letter-spacing: -0.02em !important;
        position: relative !important;
        text-shadow: 0 2px 4px rgba(30, 64, 175, 0.15) !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    }

    .blog-content h3,
    .blog-content h3:first-child {
        font-size: 2rem !important;
        font-weight: 800 !important;
        margin: 3rem 0 1.5rem 0 !important;
        color: #1e40af !important;
        line-height: 1.3 !important;
        display: block !important;
        letter-spacing: -0.015em !important;
        text-shadow: 0 1px 3px rgba(30, 64, 175, 0.1) !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    }

    .blog-content h4,
    .blog-content h4:first-child {
        font-size: 1.5rem !important;
        font-weight: 700 !important;
        margin: 2.5rem 0 1rem 0 !important;
        color: #1e40af !important;
        display: block !important;
        letter-spacing: -0.01em !important;
        text-shadow: 0 1px 2px rgba(30, 64, 175, 0.1) !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    }

    .blog-content h5 {
        font-size: 1.25rem !important;
        font-weight: 600 !important;
        margin: 1.75rem 0 0.5rem 0 !important;
        color: #1e40af !important;
        display: block !important;
    }

    .blog-content h6 {
        font-size: 1.125rem !important;
        font-weight: 600 !important;
        margin: 1.5rem 0 0.5rem 0 !important;
        color: #1e40af !important;
        display: block !important;
        text-transform: uppercase !important;
        font-size: 0.875rem !important;
        letter-spacing: 0.1em !important;
    }

    /* Paragraph and Text Styles */
    .blog-content p {
        margin-bottom: 1.25rem !important;
        line-height: 1.8 !important;
        font-size: 1.125rem !important;
        color: #334155 !important;
        text-align: justify !important;
    }

    .blog-content p:first-of-type {
        font-size: 1.25rem !important;
        color: #64748b !important;
        margin-bottom: 2rem !important;
        text-align: justify !important;
    }

    /* List Styles - Organized hierarchy */
    .blog-content ul, 
    .blog-content ol {
        margin-bottom: 1.5rem;
        padding-left: 2rem;
    }

    .blog-content ul {
        list-style-type: disc;
    }

    .blog-content ul ul {
        list-style-type: circle;
        margin-bottom: 0.5rem;
    }

    .blog-content ol {
        list-style-type: decimal;
    }

    .blog-content ol ol {
        list-style-type: lower-alpha;
        margin-bottom: 0.5rem;
    }

    .blog-content li {
        margin-bottom: 0.75rem;
        line-height: 1.6;
        position: relative;
    }

    .blog-content li::before {
        color: #f59e0b;
        font-weight: 600;
    }

    .blog-content ul li::marker {
        color: #f59e0b !important;
    }

    .blog-content ol li::marker {
        color: #1e40af !important;
        font-weight: 600;
    }

    /* Special Content Elements */
    .blog-content blockquote {
        border-left: 4px solid #f59e0b !important;
        padding-left: 1rem !important;
        margin: 1.5rem 0 !important;
        font-style: italic !important;
        color: #64748b !important;
        background: rgba(245, 158, 11, 0.05) !important;
        border-radius: 0.5rem !important;
        padding: 1rem 1rem 1rem 2rem !important;
    }

    .blog-content hr {
        border: none !important;
        height: 2px !important;
        background: linear-gradient(90deg, transparent, #f59e0b, transparent) !important;
        margin: 3rem 0 !important;
    }

    /* Code and Pre-formatted Text */
    .blog-content code {
        background: rgba(39, 84, 138, 0.1);
        padding: 0.2rem 0.4rem;
        border-radius: 0.25rem;
        font-family: 'Monaco', 'Consolas', monospace;
        font-size: 0.85em;
    }

    .blog-content pre {
        background: rgba(39, 84, 138, 0.1);
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
        margin: 1.5rem 0;
    }

    .blog-content pre code {
        background: none;
        padding: 0;
    }

    /* Text Emphasis */
    .blog-content strong {
        font-weight: 700 !important;
        color: #1e40af !important;
    }

    .blog-content em {
        font-style: italic !important;
        color: #64748b !important;
    }

    .blog-content a {
        color: #2563eb !important;
        text-decoration: underline !important;
        font-weight: 500 !important;
    }

    .blog-content a:hover {
        color: #1d4ed8 !important;
        text-decoration: none !important;
    }

    /* Table Styling */
    .blog-content table {
        width: 100% !important;
        border-collapse: collapse !important;
        margin: 2rem 0 !important;
        border-radius: 0.5rem !important;
        overflow: hidden !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
        border: 1px solid #e2e8f0 !important;
    }

    .blog-content th,
    .blog-content td {
        padding: 1rem !important;
        text-align: left !important;
        border-bottom: 1px solid #e2e8f0 !important;
        vertical-align: top !important;
    }

    .blog-content th {
        background: #f8fafc !important;
        font-weight: 600 !important;
        color: #1e40af !important;
        border-bottom: 2px solid #e2e8f0 !important;
    }

    .blog-content tr:hover {
        background: #f8fafc !important;
    }

    .blog-content tr:nth-child(even) {
        background: #fefefe !important;
    }

    .blog-content tr:nth-child(even):hover {
        background: #f8fafc !important;
    }

    /* Additional Content Formatting */
    .blog-content img {
        max-width: 100% !important;
        height: auto !important;
        margin: 2rem 0 !important;
        border-radius: 0.5rem !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
    }

    .blog-content figure {
        margin: 2rem 0 !important;
        text-align: center !important;
    }

    .blog-content figcaption {
        margin-top: 0.5rem !important;
        font-size: 0.875rem !important;
        color: #64748b !important;
        font-style: italic !important;
    }

    /* List improvements */
    .blog-content ul, 
    .blog-content ol {
        margin-bottom: 1.5rem !important;
        padding-left: 2rem !important;
    }

    .blog-content li {
        margin-bottom: 0.75rem !important;
        line-height: 1.6 !important;
        color: #334155 !important;
    }

    /* Code styling improvements */
    .blog-content code {
        background: rgba(30, 64, 175, 0.1) !important;
        padding: 0.2rem 0.4rem !important;
        border-radius: 0.25rem !important;
        font-family: 'Monaco', 'Consolas', 'Courier New', monospace !important;
        font-size: 0.9em !important;
        color: #1e40af !important;
        font-weight: 500 !important;
    }

    .blog-content pre {
        background: rgba(30, 64, 175, 0.05) !important;
        padding: 1.5rem !important;
        border-radius: 0.5rem !important;
        overflow-x: auto !important;
        margin: 2rem 0 !important;
        border: 1px solid rgba(30, 64, 175, 0.2) !important;
    }

    .blog-content pre code {
        background: none !important;
        padding: 0 !important;
        color: #1e293b !important;
        font-weight: 400 !important;
    }

    /* Make sure content flows well */
    .blog-content > *:first-child {
        margin-top: 0 !important;
    }

    .blog-content > *:last-child {
        margin-bottom: 0 !important;
    }

    /* Enhanced styling for specific content classes */
    .blog-content .section-heading {
        background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important;
        border: 3px solid #1e40af !important;
        border-left: 8px solid #1e40af !important;
        padding: 1.5rem 2rem 1.25rem 2rem !important;
        margin: 4rem 0 2.5rem 0 !important;
        border-radius: 0.75rem !important;
        box-shadow: 0 8px 16px rgba(30, 64, 175, 0.2) !important;
        position: relative !important;
        transform: translateX(0) !important;
        transition: all 0.3s ease !important;
        font-weight: 900 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
    }

    .blog-content .section-heading:hover {
        transform: translateX(4px) !important;
        box-shadow: 0 12px 24px rgba(30, 64, 175, 0.25) !important;
    }

    .blog-content .section-heading:first-child {
        margin-top: 2rem !important;
    }

    .blog-content .section-heading:before {
        content: "📋" !important;
        position: absolute !important;
        left: -8px !important;
        top: -8px !important;
        background: #1e40af !important;
        color: white !important;
        width: 32px !important;
        height: 32px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 1rem !important;
    }

    .blog-content .section-heading:after {
        content: "" !important;
        position: absolute !important;
        bottom: -3px !important;
        left: 2rem !important;
        right: 2rem !important;
        height: 4px !important;
        background: linear-gradient(90deg, #1e40af, #3b82f6, #1e40af) !important;
        border-radius: 2px !important;
    }

    .blog-content .subsection-heading {
        position: relative !important;
        background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%) !important;
        border: 2px solid #f59e0b !important;
        border-left: 6px solid #f59e0b !important;
        padding: 1rem 1.5rem 1rem 2rem !important;
        margin: 3rem 0 2rem 0 !important;
        border-radius: 0.5rem !important;
        box-shadow: 0 6px 12px rgba(245, 158, 11, 0.15) !important;
        font-weight: 800 !important;
        text-transform: capitalize !important;
        letter-spacing: 0.025em !important;
        transform: translateX(0) !important;
        transition: all 0.3s ease !important;
    }

    .blog-content .subsection-heading:hover {
        transform: translateX(2px) !important;
        box-shadow: 0 8px 16px rgba(245, 158, 11, 0.2) !important;
    }

    .blog-content .subsection-heading:before {
        content: "🔸" !important;
        position: absolute !important;
        left: -6px !important;
        top: -6px !important;
        background: #f59e0b !important;
        color: white !important;
        width: 24px !important;
        height: 24px !important;
        border-radius: 50% !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-size: 0.75rem !important;
    }

    .blog-content .content-paragraph {
        text-indent: 0 !important;
        margin-bottom: 1.5rem !important;
    }

    .blog-content .content-paragraph:first-of-type {
        font-size: 1.375rem !important;
        font-weight: 500 !important;
        color: #334155 !important;
        border: 2px solid rgba(245, 158, 11, 0.2) !important;
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.02) 100%) !important;
        padding: 1.5rem !important;
        border-radius: 0.75rem !important;
        margin-bottom: 3rem !important;
        box-shadow: 0 4px 6px -1px rgba(245, 158, 11, 0.1) !important;
        position: relative !important;
        line-height: 1.7 !important;
    }

    .blog-content .content-paragraph:first-of-type:before {
        content: "💡" !important;
        position: absolute !important;
        top: -8px !important;
        left: 1.5rem !important;
        background: white !important;
        padding: 0 0.5rem !important;
        font-size: 1.25rem !important;
    }

    .blog-content .content-list {
        background: linear-gradient(135deg, rgba(30, 64, 175, 0.05) 0%, rgba(30, 64, 175, 0.02) 100%) !important;
        padding: 1.5rem 2rem 1.5rem 3rem !important;
        border-radius: 0.75rem !important;
        border: 2px solid rgba(30, 64, 175, 0.15) !important;
        margin: 2rem 0 !important;
        box-shadow: 0 2px 4px rgba(30, 64, 175, 0.05) !important;
        position: relative !important;
    }

    .blog-content .content-list.numbered {
        border-color: rgba(245, 158, 11, 0.15) !important;
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, rgba(245, 158, 11, 0.02) 100%) !important;
        box-shadow: 0 2px 4px rgba(245, 158, 11, 0.05) !important;
    }

    .blog-content .content-list:before {
        content: "📋" !important;
        position: absolute !important;
        top: -8px !important;
        left: 1.5rem !important;
        background: white !important;
        padding: 0 0.5rem !important;
        font-size: 1rem !important;
    }

    .blog-content .content-list.numbered:before {
        content: "🔢" !important;
    }

    /* Reading progress indicators */
    .blog-content h2 {
        scroll-margin-top: 2rem !important;
    }

    .blog-content h3 {
        scroll-margin-top: 2rem !important;
    }

    /* Improved readability */
    .blog-content {
        font-feature-settings: "kern" 1, "liga" 1, "calt" 1 !important;
        text-rendering: optimizeLegibility !important;
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
    }

    /* Force headings to be bold - override any conflicts */
    .blog-content h1,
    .blog-content h2, 
    .blog-content h3,
    .blog-content h4,
    .blog-content h5,
    .blog-content h6 {
        font-weight: 900 !important;
        color: #1e40af !important;
        display: block !important;
    }

    /* Specific overrides for generated classes */
    .blog-content .section-heading,
    .blog-content h2.section-heading {
        font-size: 2.5rem !important;
        font-weight: 900 !important;
        color: #1e40af !important;
        display: block !important;
    }

    .blog-content .subsection-heading,
    .blog-content h3.subsection-heading {
        font-size: 2rem !important;
        font-weight: 800 !important;
        color: #1e40af !important;
        display: block !important;
    }

    /* Make sure all headings stand out */
    .blog-content h2 {
        font-size: 2.5rem !important;
        font-weight: 900 !important;
        margin: 4rem 0 2rem 0 !important;
    }

    .blog-content h3 {
        font-size: 2rem !important;
        font-weight: 800 !important;
        margin: 3rem 0 1.5rem 0 !important;
    }

    .blog-content h4 {
        font-size: 1.5rem !important;
        font-weight: 700 !important;
        margin: 2.5rem 0 1rem 0 !important;
    }
</style>
{% endblock %}

{% block content %}
<!-- ==========================================================================
     BLOG POST HERO SECTION
     Hero area with post metadata, title, excerpt and tags
     ========================================================================== -->
<section class="relative overflow-hidden bg-gradient-to-br from-slate-50 via-white to-blue-50">
    <!-- Background Gradient Overlay -->
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-100/20 via-transparent to-transparent"></div>
    
    <!-- Hero Content Container -->
    <div class="relative max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-24">
        <div class="space-y-8">
            <!-- Post Metadata -->
            <div class="flex items-center flex-wrap gap-4 text-sm">
                <!-- Publication Date -->
                <div class="flex items-center space-x-2 text-blue-600 bg-blue-50 px-3 py-1.5 rounded-full">
                    <i data-lucide="calendar" class="w-4 h-4"></i>
                    <span class="font-medium">{{ post.published_at|date:"F d, Y" }}</span>
                </div>
                
                <!-- Author Information -->
                {% if post.author %}
                <div class="flex items-center space-x-2 text-slate-600 bg-slate-50 px-3 py-1.5 rounded-full">
                    <i data-lucide="user" class="w-4 h-4"></i>
                    <span class="font-medium">{{ post.author.get_full_name|default:post.author.username }}</span>
                </div>
                {% endif %}
                
                <!-- Read Time Estimate -->
                <div class="flex items-center space-x-2 text-purple-600 bg-purple-50 px-3 py-1.5 rounded-full">
                    <i data-lucide="clock" class="w-4 h-4"></i>
                    <span class="font-medium">5 min read</span>
                </div>
            </div>

            <!-- Post Title -->
            <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight text-slate-900 leading-tight">
                {{ post.title }}
            </h1>

            <!-- Post Excerpt -->
            {% if post.excerpt %}
            <p class="text-xl text-slate-600 leading-relaxed max-w-3xl">
                {{ post.excerpt }}
            </p>
            {% endif %}

            <!-- Post Tags -->
            {% if post.tags %}
            <div class="flex flex-wrap gap-2 pt-4">
                {% for tag in post.tags %}
                <span class="px-4 py-2 bg-gradient-to-r from-blue-50 to-purple-50 text-blue-700 text-sm font-medium rounded-full border border-blue-200/50">
                    {{ tag }}
                </span>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- ==========================================================================
     BLOG POST MAIN CONTENT
     Article content with markdown formatting and proper typography
     ========================================================================== -->
<article class="bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Article Content Container -->
        <div class="px-8 py-12 lg:px-12">

            <!-- Formatted Article Content -->
            <div style="background: white; padding: 2rem; border-radius: 1rem; font-family: Arial, sans-serif;">
                <div id="formatted-content">
                    {{ post.content|safe }}
                </div>
                
                <script>
                    // BULLETPROOF formatting script - works everywhere!
                    function formatBlogContent() {
                        console.log('=== FORMATTING BLOG CONTENT ===');
                        
                        const container = document.getElementById('formatted-content');
                        if (!container) {
                            console.log('ERROR: No formatted-content container found');
                            return;
                        }
                        
                        console.log('Container found, applying direct inline styles...');
                        
                        // Format ALL headings with blue gradient backgrounds
                        const headings = container.querySelectorAll('h1, h2, h3, h4, h5, h6');
                        headings.forEach((heading, index) => {
                            console.log(`Formatting heading ${heading.tagName} #${index}:`, heading.textContent.substring(0, 50));
                            
                            // Common heading styles
                            const baseStyles = `
                                display: block !important;
                                width: 100% !important;
                                font-weight: 900 !important;
                                color: #1e40af !important;
                                margin: 30px 0 20px 0 !important;
                                padding: 20px 25px !important;
                                background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%) !important;
                                border: 3px solid #1e40af !important;
                                border-left: 8px solid #1e40af !important;
                                border-radius: 10px !important;
                                box-shadow: 0 8px 20px rgba(30, 64, 175, 0.15) !important;
                                font-family: Arial, sans-serif !important;
                                line-height: 1.3 !important;
                            `;
                            
                            // Size-specific styles
                            let sizeStyles = '';
                            if (heading.tagName === 'H1') {
                                sizeStyles = 'font-size: 28px !important;';
                            } else if (heading.tagName === 'H2') {
                                sizeStyles = 'font-size: 24px !important;';
                            } else if (heading.tagName === 'H3') {
                                sizeStyles = 'font-size: 20px !important; background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%) !important; border-color: #ea580c !important;';
                            } else {
                                sizeStyles = 'font-size: 18px !important;';
                            }
                            
                            heading.style.cssText = baseStyles + sizeStyles;
                        });
                        
                        // Format ALL paragraphs with light orange backgrounds
                        const paragraphs = container.querySelectorAll('p');
                        paragraphs.forEach((p, index) => {
                            console.log(`Formatting paragraph #${index}:`, p.textContent.substring(0, 50));
                            p.style.cssText = `
                                display: block !important;
                                width: 100% !important;
                                margin: 20px 0 !important;
                                padding: 20px !important;
                                background: rgba(254, 215, 170, 0.1) !important;
                                border-left: 4px solid #f97316 !important;
                                border-radius: 8px !important;
                                box-shadow: 0 2px 8px rgba(249, 115, 22, 0.05) !important;
                                line-height: 1.7 !important;
                                font-size: 16px !important;
                                color: #374151 !important;
                                font-family: Arial, sans-serif !important;
                            `;
                        });
                        
                        // Format ALL lists with green backgrounds
                        const lists = container.querySelectorAll('ul, ol');
                        lists.forEach((list, index) => {
                            console.log(`Formatting list #${index}:`, list.tagName);
                            list.style.cssText = `
                                display: block !important;
                                width: 100% !important;
                                margin: 20px 0 !important;
                                padding: 20px 20px 20px 40px !important;
                                background: rgba(220, 252, 231, 0.3) !important;
                                border: 2px solid #10b981 !important;
                                border-radius: 8px !important;
                                box-shadow: 0 3px 12px rgba(16, 185, 129, 0.08) !important;
                                font-family: Arial, sans-serif !important;
                            `;
                        });
                        
                        // Format ALL list items
                        const listItems = container.querySelectorAll('li');
                        listItems.forEach((li, index) => {
                            li.style.cssText = `
                                margin-bottom: 10px !important;
                                line-height: 1.6 !important;
                                color: #374151 !important;
                                font-family: Arial, sans-serif !important;
                            `;
                        });
                        
                        console.log(`=== FORMATTING COMPLETED ===`);
                        console.log(`Formatted ${headings.length} headings, ${paragraphs.length} paragraphs, ${lists.length} lists`);
                    }
                    
                    // Run formatting immediately when DOM is ready
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', formatBlogContent);
                    } else {
                        formatBlogContent();
                    }
                    
                    // Also run after a small delay to catch any late-loading content
                    setTimeout(formatBlogContent, 1000);
                </script>
            </div>
        </div>
    </div>
</article>


<!-- ==========================================================================
     RELATED POSTS SECTION
     Display related blog posts for continued reading
     ========================================================================== -->
{% if related_posts %}
<section class="py-20 bg-gradient-to-br from-slate-50 to-blue-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Section Header -->
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-slate-900 mb-4">Related Articles</h2>
            <p class="text-xl text-slate-600 max-w-2xl mx-auto">
                Discover more insights and strategies to grow your business
            </p>
        </div>
        
        <!-- Related Posts Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            {% for related_post in related_posts %}
            <article class="group bg-white rounded-2xl shadow-sm border border-slate-200/50 overflow-hidden hover:shadow-xl transition-all duration-300 hover:-translate-y-1">
                <!-- Post Featured Image/Icon -->
                <div class="h-48 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 flex items-center justify-center relative overflow-hidden">
                    <div class="absolute inset-0 bg-black/10 group-hover:bg-black/5 transition-colors"></div>
                    <div class="relative z-10 text-white text-center">
                        <div class="w-16 h-16 mx-auto mb-3 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">
                            <i data-lucide="{% if 'ai' in related_post.title.lower %}brain-circuit{% elif 'marketing' in related_post.title.lower %}megaphone{% elif 'strategy' in related_post.title.lower %}target{% elif 'salesforce' in related_post.title.lower %}database{% else %}file-text{% endif %}" class="w-8 h-8 text-white"></i>
                        </div>
                    </div>
                </div>

                <!-- Post Content -->
                <div class="p-8">
                    <!-- Post Metadata -->
                    <div class="flex items-center space-x-3 text-sm text-slate-500 mb-4">
                        <i data-lucide="calendar" class="w-4 h-4"></i>
                        <span>{{ related_post.published_at|date:"M d, Y" }}</span>
                    </div>

                    <!-- Post Title -->
                    <h3 class="text-xl font-semibold text-slate-900 mb-3 group-hover:text-blue-600 transition-colors line-clamp-2">
                        <a href="/blog/{{ related_post.slug }}/">{{ related_post.title }}</a>
                    </h3>

                    <!-- Post Excerpt -->
                    <p class="text-slate-600 mb-6 line-clamp-3">
                        {{ related_post.excerpt|default:related_post.content|striptags|truncatewords:25 }}
                    </p>

                    <!-- Read More Link -->
                    <a href="/blog/{{ related_post.slug }}/" class="inline-flex items-center text-blue-600 hover:text-blue-700 font-semibold transition-colors group">
                        Read More
                        <i data-lucide="arrow-right" class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"></i>
                    </a>
                </div>
            </article>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- ==========================================================================
     CALL TO ACTION SECTION
     Conversion-focused section to engage readers after reading the blog post
     ========================================================================== -->
<section class="py-20 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-700">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="space-y-8">
            <!-- CTA Header -->
            <div class="space-y-4">
                <h2 class="text-4xl md:text-5xl font-bold text-white leading-tight">
                    Ready to Transform Your Business?
                </h2>
                <p class="text-xl md:text-2xl text-white/90 max-w-3xl mx-auto leading-relaxed">
                    Join thousands of businesses already using our AI-powered solutions to achieve breakthrough results in weeks, not months.
                </p>
            </div>
            
            <!-- CTA Buttons -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <a href="/contact/" class="inline-flex items-center justify-center px-8 py-4 bg-white text-blue-600 font-bold text-lg rounded-full hover:bg-slate-50 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                    Get Started Today
                    <i data-lucide="arrow-right" class="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"></i>
                </a>
                <a href="/demo/" class="inline-flex items-center justify-center px-8 py-4 bg-transparent border-2 border-white/30 text-white font-bold text-lg rounded-full hover:bg-white/10 transition-all duration-300">
                    Book a Demo
                    <i data-lucide="play" class="w-5 h-5 ml-2"></i>
                </a>
            </div>
            
            <!-- Trust Indicators -->
            <div class="flex items-center justify-center space-x-8 text-white/70">
                <div class="flex items-center space-x-2">
                    <i data-lucide="check-circle" class="w-5 h-5"></i>
                    <span>30-day free trial</span>
                </div>
                <div class="flex items-center space-x-2">
                    <i data-lucide="users" class="w-5 h-5"></i>
                    <span>24/7 support</span>
                </div>
                <div class="flex items-center space-x-2">
                    <i data-lucide="shield" class="w-5 h-5"></i>
                    <span>Enterprise security</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ==========================================================================
     JAVASCRIPT INITIALIZATION
     Initialize required JavaScript libraries and components
     ========================================================================== -->
<script>
    /**
     * Initialize Lucide Icons and Blog Content Formatting
     * Creates all icon elements and applies CSS classes to blog content
     */
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Lucide icons if library is available
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
        
        // CSS styles are now applied directly to elements - no JavaScript needed!
    });
    
</script>
{% endblock %}