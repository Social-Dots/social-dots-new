{% load static %}
<!DOCTYPE html>
<html lang="en-CA" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{% block title %}{{ site_config.site_name|default:"Social Dots Inc." }}{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}{{ site_config.meta_description|default:'Strategic AI integration and digital solutions for Canadian businesses' }}{% endblock %}">
    <link rel="icon" href="{% static 'images/favicon.ico' %}">
    {% if site_config.favicon %}
        <link rel="icon" type="image/png" href="{% static site_config.favicon %}">
    {% else %}
        <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    {% endif %}
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
        darkMode: 'class',
        theme: {
            extend: {
                colors: {
                    border: "hsl(var(--border))",
                    input: "hsl(var(--input))",
                    ring: "hsl(var(--ring))",
                    background: "hsl(var(--background))",
                    foreground: "hsl(var(--foreground))",
                    primary: {
                        DEFAULT: "hsl(var(--primary))",
                        foreground: "hsl(var(--primary-foreground))",
                    },
                    secondary: {
                        DEFAULT: "hsl(var(--secondary))",
                        foreground: "hsl(var(--secondary-foreground))",
                    },
                    destructive: {
                        DEFAULT: "hsl(var(--destructive))",
                        foreground: "hsl(var(--destructive-foreground))",
                    },
                    muted: {
                        DEFAULT: "hsl(var(--muted))",
                        foreground: "hsl(var(--muted-foreground))",
                    },
                    accent: {
                        DEFAULT: "hsl(var(--accent))",
                        foreground: "hsl(var(--accent-foreground))",
                    },
                    popover: {
                        DEFAULT: "hsl(var(--popover))",
                        foreground: "hsl(var(--popover-foreground))",
                    },
                    card: {
                        DEFAULT: "hsl(var(--card))",
                        foreground: "hsl(var(--card-foreground))",
                    },
                    // Custom color palette
                    cream: '#F3F3E0',
                    navy: '#27548A',
                    darkNavy: '#183B4E',
                    gold: '#DDA853',
                    // New colors added here
                    deepBlue: '#0B32A4',
                    brightBlue: '#0E42CE',
                    vibrantOrange: '#FFA300'
                },
                borderRadius: {
                    lg: "var(--radius)",
                    md: "calc(var(--radius) - 2px)",
                    sm: "calc(var(--radius) - 4px)",
                }
            }
        }
    }
</script>
    
    <!-- Modern Card System -->
    <link rel="stylesheet" href="{% static 'css/modern-cards.css' %}?v=4">
    
    <!-- Modern Styling System -->
    <link rel="stylesheet" href="{% static 'css/modern-styling.css' %}?v=4">
    
    <!-- shadcn/ui CSS Variables and Modern Design System -->
    <style>
    :root {
        /* Custom Color Palette */
        --cream: 60 40% 92%; /* #F3F3E0 */
        --navy: 210 55% 35%; /* #27548A */
        --dark-navy: 202 50% 20%; /* #183B4E */
        --gold: 36 65% 59%; /* #DDA853 */
        /* New colors added as CSS variables */
        --deep-blue: 226 87% 34%; /* #0B32A4 */
        --bright-blue: 226 88% 43%; /* #0E42CE */
        --vibrant-orange: 39 100% 50%; /* #FFA300 */
        /* Grey for text */
        --grey: 0 0% 40%; /* Grey for text */
        
        /* Modern Light Theme Variables with New Color Palette */
        --background: var(--cream);
        --foreground: var(--dark-navy);
        --card: 0 0% 100%;
        --card-foreground: var(--dark-navy);
        --popover: 0 0% 100%;
        --popover-foreground: var(--dark-navy);
        --primary: var(--bright-blue); /* Updated to use brightBlue */
        --primary-foreground: var(--cream);
        --secondary: var(--vibrant-orange); /* Updated to use vibrantOrange */
        --secondary-foreground: var(--dark-navy);
        --muted: 210 40% 96%;
        --muted-foreground: 215 25% 40%;
        --accent: var(--vibrant-orange); /* Updated to use vibrantOrange */
        --accent-foreground: var(--dark-navy);
        --destructive: 0 84% 60%;
        --destructive-foreground: 0 0% 98%;
        --border: 214 32% 91%;
        --input: 214 32% 91%;
        --ring: var(--bright-blue); /* Updated to use brightBlue */
        --radius: 0.75rem;
        
        /* Social Dots Brand Colors */
        --brand-primary: {{ site_config.primary_color|default:"#0E42CE" }}; /* Updated default to brightBlue */
        --brand-secondary: {{ site_config.secondary_color|default:"#0B32A4" }}; /* Updated default to deepBlue */
        --brand-accent: {{ site_config.accent_color|default:"#FFA300" }}; /* Updated default to vibrantOrange */
    }

    /* Updated button styles to use new colors */
    .btn-primary {
        @apply inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-cream bg-brightBlue hover:bg-deepBlue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-vibrantOrange transition-all duration-300 ease-in-out transform hover:-translate-y-1;
    }

    /* Updated text to use solid color instead of gradient */
    .text-gradient {
        @apply text-deepBlue;
    }

    /* Updated glass card border color */
    .glass-card {
        @apply bg-cream/70 backdrop-blur-lg rounded-xl shadow-xl;
        border: 1px solid rgba(255, 163, 0, 0.2); /* Using vibrantOrange */
        transition: all 0.5s ease;
    }
    
    .glass-card:hover {
        @apply shadow-2xl;
        border: 1px solid rgba(255, 163, 0, 0.4); /* Using vibrantOrange */
        transform: translateY(-5px) scale(1.02);
    }

    /* Updated nav indicator to use vibrantOrange */
    .nav-indicator {
        background-color: var(--vibrant-orange);
        box-shadow: 0 2px 8px rgba(41, 38, 38, 0.3); /* Using vibrantOrange */
    }  
        /* Mobile responsive button adjustments */
        @media (max-width: 640px) {
            .btn-primary, .btn-secondary, .btn-ghost, .btn-gold {
                @apply text-xs px-3 py-2 w-full justify-center;
            }
        }
        
        .btn-gold {
            background-color: #FFA300;
            color: #0B32A4;
            @apply inline-flex items-center justify-center px-4 py-2 rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brightBlue transition-all duration-300 ease-in-out transform hover:-translate-y-1 border-none;
        }
        
        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 163, 0, 0.3);
        }
        
        .btn-ghost::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: transparent;
            transition: all 0.3s ease;
        }
        
        .btn-ghost:hover::after {
            background-color: #0E42CE;
        }

        /* Modern Card Styles with Mobile Responsiveness */
        .card-modern {
            @apply bg-cream rounded-xl shadow-md overflow-hidden;
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            border: 1px solid rgba(255, 163, 0, 0.1);
        }
        
        .card-modern:hover {
            @apply shadow-xl;
            transform: translateY(-8px);
            border: 1px solid rgba(255, 163, 0, 0.3);
        }
        
        /* Mobile responsive card adjustments */
        @media (max-width: 640px) {
            .card-modern {
                @apply p-4;
            }
            
            .card-modern:hover {
                transform: translateY(-4px);
            }
        }

        /* Modern Text */
        .text-gradient {
            @apply text-deepBlue;
        }
        
        .text-gradient-gold {
            @apply text-vibrantOrange;
        }

        /* Modern Glassmorphism with Mobile Responsiveness */
        .glass-card {
            @apply bg-cream/70 backdrop-blur-lg rounded-xl shadow-xl;
            border: 1px solid rgba(255, 163, 0, 0.2);
            transition: all 0.5s ease;
        }
        
        .glass-card:hover {
            @apply shadow-2xl;
            border: 1px solid rgba(255, 163, 0, 0.4);
            transform: translateY(-5px) scale(1.02);
        }
        
        /* Mobile responsive glass card adjustments */
        @media (max-width: 640px) {
            .glass-card {
                @apply px-3 py-2;
            }
            
            .glass-card:hover {
                transform: translateY(-3px) scale(1.01);
            }
        }
        
        /* Feature Card with Mobile Responsiveness */
        .feature-card {
            @apply p-6 rounded-xl bg-cream;
            border: 1px solid rgba(255, 163, 0, 0.1);
            transition: all 0.4s ease;
        }
        
        .feature-card:hover {
            @apply shadow-lg;
            border: 1px solid rgba(255, 163, 0, 0.3);
            transform: translateY(-5px);
        }
        
        /* Mobile responsive feature card adjustments */
        @media (max-width: 640px) {
            .feature-card {
                @apply p-4;
            }
            
            .feature-card:hover {
                transform: translateY(-3px);
            }
        }
        
        /* Pricing Card with Mobile Responsiveness */
        .pricing-card {
            @apply p-6 rounded-xl bg-cream;
            border: 1px solid rgba(11, 50, 164, 0.1);
            transition: all 0.4s ease;
        }
        
        .pricing-card.featured {
            @apply bg-deepBlue/5;
            border: 1px solid rgba(11, 50, 164, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .pricing-card.featured::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background-color: #FFA300;
        }
        
        .pricing-card:hover {
            @apply shadow-xl;
            transform: translateY(-8px) scale(1.02);
        }
        
        /* Mobile responsive pricing card adjustments */
        @media (max-width: 640px) {
            .pricing-card {
                @apply p-5;
            }
            
            .pricing-card:hover {
                transform: translateY(-3px) scale(1.01);
            }
        }

        .gradient-text {
            @apply text-deepBlue;
        }

        .glass-morphism {
            backdrop-filter: blur(20px);
            background: rgba(243, 243, 224, 0.8);
            border: 1px solid rgba(255, 163, 0, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(11, 50, 164, 0.1);
        }

        /* Modern Navigation */
        .nav-modern {
            @apply fixed top-0 w-full z-50;
            backdrop-filter: blur(20px);
            background: rgba(243, 243, 224, 0.9);
            border-bottom: 1px solid rgba(29, 28, 27, 0.2);
            box-shadow: 0 1px 30px rgba(11, 50, 164, 0.1);
            transition: all 0.3s ease;
        }
        
        /* Enhanced Navigation Styles */
@keyframes navLinkFadeIn {
    0% { opacity: 0; transform: translateY(-10px); }
    100% { opacity: 1; transform: translateY(0); }
}

@keyframes logoShine {
    0% { transform: translateX(-100%) rotate(45deg); }
    50% { transform: translateX(100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}

.logo-container {
    position: relative;
    overflow: hidden;
}

.logo-shine {
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background-color: rgba(255, 255, 255, 0.3);
    transform: translateX(-100%) rotate(45deg);
    animation: logoShine 6s ease-in-out infinite;
    animation-delay: 2s;
    pointer-events: none;
}

.nav-link {
    position: relative;
    padding: 0.5rem 0;
    font-weight: 500;
    font-size: 1rem;
    color: var(--navy);
    transition: all 0.3s ease;
    animation: navLinkFadeIn 0.5s ease forwards;
    animation-delay: calc(var(--nav-item-index, 0) * 0.1s);
    opacity: 0;
}

.nav-text {
    position: relative;
    z-index: 1;
    transition: transform 0.3s ease, color 0.3s ease;
}

.nav-link:hover .nav-text {
    color: var(--gold);
    transform: translateY(-2px);
}

.nav-indicator {
    position: absolute;
    bottom: -4px;
    left: 0;
    height: 3px;
    width: 0;
    background-color: var(--vibrant-orange);
    border-radius: 4px;
    transition: width 0.3s ease, opacity 0.3s ease;
    opacity: 0;
    box-shadow: 0 2px 8px #ffa3004d;
}

.nav-link:hover .nav-text {
    color: var(--vibrant-orange);
    transform: translateY(-2px);
}

.nav-link:hover .nav-indicator {
    width: 100%;
    opacity: 1;
}

.nav-link.active .nav-indicator {
    width: 100%;
    opacity: 1;
}

.nav-link.active .nav-text {
    color: var(--vibrant-orange);
    font-weight: 600;
}

.nav-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 0.3s ease, transform 0.3s ease;
    z-index: 0;
    pointer-events: none;
}

.nav-link:hover::before {
    opacity: 1;
    transform: scale(1.5);
}

.nav-link.active::before {
    opacity: 0.5;
    transform: scale(1.2);
}

        @keyframes mobileNavLinkFadeIn {
    0% { opacity: 0; transform: translateX(-20px); }
    100% { opacity: 1; transform: translateX(0); }
}

.mobile-nav-link {
    display: flex;
    align-items: center;
    padding: 0.75rem 1rem;
    border-radius: 0.75rem;
    font-weight: 500;
    color: var(--navy);
    transition: all 0.3s ease;
    margin-bottom: 0.25rem;
    position: relative;
    overflow: hidden;
    animation: mobileNavLinkFadeIn 0.5s ease forwards;
    animation-delay: calc(var(--mobile-nav-item-index, 0) * 0.1s);
    opacity: 0;
}

.mobile-nav-link:hover {
    background-color: rgba(11, 50, 164, 0.05);
    transform: translateX(4px);
    color: var(--vibrant-orange);
}

.mobile-nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: var(--vibrant-orange);
    transition: width 0.3s ease;
}

.mobile-nav-link:hover::after {
    width: 100%;
}

.mobile-nav-link i {
    transition: transform 0.3s ease, color 0.3s ease;
}

.mobile-nav-link:hover i {
    transform: scale(1.2);
    color: var(--vibrant-orange);
}

/* Hero - Custom Theme */
.hero-gradient {
    background-color: #F3F3E0;
}

        /* Background - Custom Theme */
        .animated-bg {
            background-color: #0B32A4;
        }

        /* Enhanced Floating animation */
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(3deg); }
        }

        @keyframes floatReverse {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(15px) rotate(-2deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        
        /* Marquee animation for trust logos */
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
        
        .animate-marquee {
            animation: marquee 30s linear infinite;
        }

        .float-animation {
            animation: float 8s ease-in-out infinite;
        }

        .float-reverse {
            animation: floatReverse 10s ease-in-out infinite;
        }
        
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        .slide-in-right {
            animation: slideInRight 0.8s ease-out forwards;
        }
        
        .slide-in-left {
            animation: slideInLeft 0.8s ease-out forwards;
        }
        
        .scale-in {
            animation: scaleIn 0.8s ease-out forwards;
        }
        
        .stagger-1 { animation-delay: 0.1s; }
        .stagger-2 { animation-delay: 0.2s; }
        .stagger-3 { animation-delay: 0.3s; }
        .stagger-4 { animation-delay: 0.4s; }
        .stagger-5 { animation-delay: 0.5s; }

        /* Enhanced Glowing effect */
        .glow-effect {
            box-shadow: 0 0 30px rgba(14, 66, 206, 0.4), 0 0 60px rgba(14, 66, 206, 0.2), 0 0 90px rgba(14, 66, 206, 0.1);
            transition: box-shadow 0.3s ease-in-out;
        }

        .glow-effect:hover {
            box-shadow: 0 0 40px rgba(14, 66, 206, 0.6), 0 0 80px rgba(14, 66, 206, 0.3), 0 0 120px rgba(14, 66, 206, 0.2);
        }

        /* Icon containers with rounded elegance */
        .icon-container {
            width: 60px;
            height: 60px;
            border-radius: 20px;
            background-color: #0E42CE;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px #0d40cc4d;
            transition: all 0.3s ease;
        }

        .icon-container:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 12px 40px rgba(14, 66, 206, 0.4);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            @apply bg-muted;
        }

        ::-webkit-scrollbar-thumb {
            @apply bg-muted-foreground/30 rounded-full;
        }

        ::-webkit-scrollbar-thumb:hover {
            @apply bg-muted-foreground/50;
        }
    </style>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- Custom Portfolio Animations -->
    <link rel="stylesheet" href="{% static 'css/portfolio-animations.css' %}">
    
    {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-background">
    <!-- Enhanced Modern Navigation Bar with Mobile Responsiveness -->    
    <nav class="nav-modern sticky top-0 z-50 w-full backdrop-blur-xl bg-white border-w ease-in-out animate-fadeIn">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16 sm:h-20"> 
                <!-- Enhanced Logo with Animation -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-4 group"> 
                        {% comment %} <div class="w-12 h-12 bg-gradient-to-br from-navy via-blue-500 to-darkNavy rounded-2xl flex items-center justify-center transition-all duration-500 ease-in-out transform group-hover:scale-110 group-hover:rotate-6 shadow-lg group-hover:shadow-navy/30 overflow-hidden relative logo-container">
                            <div class="absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                            <div class="logo-shine"></div>
                            <span class="text-white font-bold text-xl relative z-10">SD</span>
                        </div> {% endcomment %}
                        <div class="flex flex-col">
                            {% if site_config.logo %}
                                <img src="{{ site_config.logo.url }}" class="h-8" alt="{{ site_config.site_name }}" />
                            {% else %}
                                <div class="text-2xl font-bold text-navy">
                                    {{ site_config.site_name|default:"Social Dots" }}
                                </div>
                            {% endif %}
                            <span class="text-[10px] sm:text-xs text-navy/70 font-medium tracking-wider">{{ site_config.tagline|truncatewords:4 }}</span>
                        </div>
                    </a>
                </div>

                <!-- Enhanced Desktop Navigation -->
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8"> 
                        <a href="/" class="nav-link group" style="--nav-item-index: 0">
                            <span class="text-black font-medium">Home</span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/services/" class="nav-link group" style="--nav-item-index: 1">
                            <span class="text-black font-medium">Services</span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/portfolio/" class="nav-link group" style="--nav-item-index: 2">
                            <span class="text-black font-medium">Portfolio</span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/about/" class="nav-link group" style="--nav-item-index: 3">
                            <span class="text-black font-medium">About</span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/blog/" class="nav-link group" style="--nav-item-index: 4">
                            <span class="text-black font-medium">Blog</span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/cart/" class="nav-link group relative" style="--nav-item-index: 6">
                            <span class="text-black font-medium flex items-center">
                                <i data-lucide="shopping-cart" class="w-5 h-5 mr-1"></i>
                                <span id="cart-count" class="absolute -top-2 -right-2 bg-vibrantOrange text-deepBlue text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center">0</span>
                            </span>
                            <span class="nav-indicator bg-vibrantOrange"></span>
                        </a>
                        <a href="/contact/" class="font-bold btn-gold transition-all duration-300 hover:scale-105 shadow-lg px-4 py-3 ml-4 flex items-center space-x-2 group rounded-sm">
                            <span>Get Started</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Enhanced Mobile menu button with animation and improved touch target -->
                <div class="md:hidden">
                    <button id="mobile-menu-toggle" class="p-3 rounded-xl bg-deepBlue/5 hover:bg-deepBlue/10 focus:outline-none focus:ring-2 focus:ring-vibrantOrange transition-all duration-300 ease-in-out">
                        <i data-lucide="menu" class="h-6 w-6 text-deepBlue"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Enhanced Mobile Navigation with smooth animation -->
        <div id="mobile-menu" class="md:hidden hidden transform transition-all duration-300 ease-in-out">
            <div class="px-3 pt-3 pb-4 space-y-1 sm:px-4 bg-cream/95 backdrop-blur-xl border-t border-vibrantOrange/20 shadow-xl rounded-b-2xl mx-2 max-h-[80vh] overflow-y-auto">
                <a href="/" class="mobile-nav-link" style="--mobile-nav-item-index: 0">
                    <i data-lucide="home" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>Home</span>
                </a>
                <a href="/services/" class="mobile-nav-link" style="--mobile-nav-item-index: 1">
                    <i data-lucide="briefcase" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>Services</span>
                </a>
                <a href="/portfolio/" class="mobile-nav-link" style="--mobile-nav-item-index: 2">
                    <i data-lucide="image" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>Portfolio</span>
                </a>
                <a href="/about/" class="mobile-nav-link" style="--mobile-nav-item-index: 3">
                    <i data-lucide="users" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>About</span>
                </a>
                <a href="/blog/" class="mobile-nav-link" style="--mobile-nav-item-index: 4">
                    <i data-lucide="file-text" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>Blog</span>
                </a>
                <a href="/cart/" class="mobile-nav-link" style="--mobile-nav-item-index: 6">
                    <i data-lucide="shopping-cart" class="h-5 w-5 mr-3 text-navy/70"></i>
                    <span>Cart</span>
                    <span id="mobile-cart-count" class="ml-auto bg-vibrantOrange text-deepBlue text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center">0</span>
                </a>
                <a href="/contact/" class="btn-gold flex items-center justify-center space-x-2 px-4 py-3 mt-3 text-base font-medium transition-all duration-300 ease-in-out shadow-md rounded-xl group">
                    <span>Get Started</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-0">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Modern Footer -->
    <style>
        .gradient-text {
            color: #0B32A4;
        }
        
        .canada-pin {
            position: absolute;
            top: 35%;
            left: 25%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        
        .canada-pin-pulse {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(239, 68, 68, 0.4);
            animation: pulse 2s infinite;
        }
        
        .canada-pin-dot {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            70% {
                transform: scale(1.8);
                opacity: 0;
            }
            100% {
                transform: scale(1.8);
                opacity: 0;
            }
        }
        
        @keyframes zoomOutBackground {
            0% {
                background-size: 200%;
            }
            100% {
                background-size: 100%;
            }
        }

.world-map-bg {
  background-color:rgb(38, 47, 61);
  background-image: url('https://as1.ftcdn.net/jpg/01/11/69/04/1000_F_111690462_0oiKQ3ylLhWHaEWNpgEclgqUVFz2ZT3Q.jpg');
  background-size: 200%;
  background-position: center;
  background-repeat: no-repeat;
  animation: zoomOutBackground 3s ease-out forwards;
  position: relative;
}


    </style>
    <!-- Enhanced Footer -->
{% include 'footer.html' %}
    <script>
        // Wait for DOM to load, then initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>

    <!-- Mobile Menu Script -->
    <script>
        // Initialize Lucide icons
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }

        // Enhanced Mobile menu toggle with smooth animation
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuIcon = mobileMenuToggle.querySelector('[data-lucide="menu"]');
            let isAnimating = false;

            mobileMenuToggle.addEventListener('click', function() {
                if (isAnimating) return;
                isAnimating = true;
                
                if (mobileMenu.classList.contains('hidden')) {
                    // Show menu with animation
                    mobileMenu.classList.remove('hidden');
                    mobileMenu.style.opacity = '0';
                    mobileMenu.style.maxHeight = '0';
                    mobileMenu.style.overflow = 'hidden';
                    
                    // Animate menu opening
                    setTimeout(() => {
                        mobileMenu.style.transition = 'opacity 0.3s ease, max-height 0.5s ease';
                        mobileMenu.style.opacity = '1';
                        mobileMenu.style.maxHeight = '500px';
                        
                        // Change icon to X with rotation
                        menuIcon.style.transition = 'transform 0.3s ease';
                        menuIcon.style.transform = 'rotate(90deg)';
                        setTimeout(() => {
                            menuIcon.outerHTML = '<i data-lucide="x" class="h-6 w-6 text-navy" style="transform: rotate(0deg);"></i>';
                            lucide.createIcons();
                            isAnimating = false;
                        }, 150);
                    }, 10);
                } else {
                    // Animate menu closing
                    mobileMenu.style.transition = 'opacity 0.3s ease, max-height 0.5s ease';
                    mobileMenu.style.opacity = '0';
                    mobileMenu.style.maxHeight = '0';
                    
                    // Rotate X icon before changing back to menu
                    const xIcon = mobileMenuToggle.querySelector('[data-lucide="x"]');
                    if (xIcon) {
                        xIcon.style.transition = 'transform 0.3s ease';
                        xIcon.style.transform = 'rotate(90deg)';
                    }
                    
                    // After animation completes, hide menu and change icon
                    setTimeout(() => {
                        mobileMenu.classList.add('hidden');
                        if (xIcon) {
                            xIcon.outerHTML = '<i data-lucide="menu" class="h-6 w-6 text-navy"></i>';
                            lucide.createIcons();
                        }
                        isAnimating = false;
                    }, 300);
                }
            });

            // Add scroll effect to navbar with throttling
            const navbar = document.querySelector('.nav-modern');
            let isScrolling = false;
            
            function handleScroll() {
                if (!isScrolling) {
                    requestAnimationFrame(() => {
                        if (window.scrollY > 50) {
                            navbar.classList.add('scrolled');
                        } else {
                            navbar.classList.remove('scrolled');
                        }
                        isScrolling = false;
                    });
                    isScrolling = true;
                }
            }
            
            window.addEventListener('scroll', handleScroll, { passive: true });
            
            // Set active state for current page
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
            
            function setActiveNavLink() {
                // For desktop navigation
                navLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    if (currentPath === linkPath || 
                        (linkPath !== '/' && currentPath.startsWith(linkPath))) {
                        link.classList.add('active');
                    }
                });
                
                // For mobile navigation
                mobileNavLinks.forEach(link => {
                    const linkPath = link.getAttribute('href');
                    if (currentPath === linkPath || 
                        (linkPath !== '/' && currentPath.startsWith(linkPath))) {
                        link.classList.add('active');
                        // Add special styling for active mobile link
                        link.style.backgroundColor = 'rgba(var(--navy-rgb), 0.05)';
                        // Check if the icon exists before trying to style it
                        const icon = link.querySelector('i');
                        if (icon) {
                            icon.style.color = 'var(--gold)';
                        }
                    }
                });
            }
            
            // Set active links when DOM is loaded
            setActiveNavLink();
            
            // Cart functionality
            console.log('Defining cart object');
            window.cart = {
                items: [],
                
                // Initialize cart from localStorage
                init: function() {
                    console.log('Cart init method called');
                    try {
                        const savedCart = localStorage.getItem('cart');
                        console.log('Saved cart from localStorage:', savedCart);
                        if (savedCart) {
                            this.items = JSON.parse(savedCart);
                            this.updateCartCount();
                        }
                    } catch (error) {
                        console.error('Error in cart init:', error);
                    }
                },
                
                // Add item to cart
                addItem: function(item) {
                    console.log('addItem called with:', item);
                    try {
                        // Check if item already exists
                        const existingItem = this.items.find(i => i.id === item.id && i.priceType === item.priceType);
                        console.log('Existing item found:', existingItem);
                        
                        if (existingItem) {
                            existingItem.quantity += item.quantity;
                            console.log('Updated quantity for existing item:', existingItem);
                        } else {
                            this.items.push(item);
                            console.log('Added new item to cart');
                        }
                        
                        this.saveCart();
                        this.updateCartCount();
                        this.showNotification(`${item.name} added to cart`);
                        console.log('Item successfully added to cart');
                        return true;
                    } catch (error) {
                        console.error('Error in addItem method:', error);
                        return false;
                    }
                },
                
                // Remove item from cart
                removeItem: function(itemId, priceType) {
                    this.items = this.items.filter(item => !(item.id === itemId && item.priceType === priceType));
                    this.saveCart();
                    this.updateCartCount();
                },
                
                // Update item quantity
                updateQuantity: function(itemId, priceType, quantity) {
                    const item = this.items.find(i => i.id === itemId && i.priceType === priceType);
                    if (item) {
                        item.quantity = quantity;
                        if (item.quantity <= 0) {
                            this.removeItem(itemId, priceType);
                        } else {
                            this.saveCart();
                            this.updateCartCount();
                        }
                    }
                },
                
                // Save cart to localStorage
                saveCart: function() {
                    console.log('saveCart called, items:', this.items);
                    try {
                        localStorage.setItem('cart', JSON.stringify(this.items));
                        console.log('Cart saved to localStorage successfully');
                    } catch (error) {
                        console.error('Error saving cart to localStorage:', error);
                    }
                },
                
                // Update cart count in UI
                updateCartCount: function() {
                    console.log('updateCartCount called');
                    try {
                        const count = this.items.reduce((total, item) => total + item.quantity, 0);
                        console.log('Cart count calculated:', count);
                        
                        const cartCountElement = document.getElementById('cart-count');
                        const mobileCartCountElement = document.getElementById('mobile-cart-count');
                        
                        if (cartCountElement) {
                            cartCountElement.textContent = count;
                        } else {
                            console.error('cart-count element not found');
                        }
                        
                        if (mobileCartCountElement) {
                            mobileCartCountElement.textContent = count;
                        } else {
                            console.error('mobile-cart-count element not found');
                        }
                        
                        console.log('Cart count updated in UI');
                    } catch (error) {
                        console.error('Error updating cart count:', error);
                    }
                },
            
            // Show notification
            showNotification(message, type = 'success') {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `fixed bottom-4 right-4 z-50 p-4 rounded-lg shadow-xl transition-all transform translate-y-full opacity-0 ${type === 'success' ? 'bg-gradient-to-r from-green-500 to-teal-500 text-white' : 'bg-gradient-to-r from-red-500 to-pink-500 text-white'}`;
                notification.innerHTML = `
                    <div class="flex items-center">
                        <div class="flex-shrink-0 bg-white bg-opacity-20 rounded-full p-2">
                            <i data-lucide="${type === 'success' ? 'check-circle' : 'alert-circle'}" class="w-5 h-5"></i>
                        </div>
                        <div class="ml-3">
                            <p class="text-sm font-medium">${message}</p>
                        </div>
                        <div class="ml-auto pl-3">
                            <button type="button" class="inline-flex text-white hover:text-gray-200 transition-colors duration-200">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                // Add to DOM
                document.body.appendChild(notification);
                
                // Initialize Lucide icons in the notification
                lucide.createIcons({
                    icons: {
                        'check-circle': lucide.icons['check-circle'],
                        'alert-circle': lucide.icons['alert-circle'],
                        'x': lucide.icons['x']
                    },
                    attrs: {
                        class: "w-5 h-5"
                    }
                }, notification);
                
                // Add close button functionality
                const closeButton = notification.querySelector('button');
                closeButton.addEventListener('click', () => {
                    notification.classList.add('translate-y-full', 'opacity-0');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                });
                
                // Animate in
                setTimeout(() => {
                    notification.classList.remove('translate-y-full', 'opacity-0');
                    notification.classList.add('translate-y-0', 'opacity-100');
                }, 10);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    notification.classList.remove('translate-y-0', 'opacity-100');
                    notification.classList.add('translate-y-full', 'opacity-0');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 5000);
            },
            
            // Calculate cart total
            getTotal() {
                return this.items.reduce((total, item) => total + (item.price * item.quantity), 0);
            }
            };
            
            // Initialize cart with debugging
            console.log('Initializing cart object');
            
            // Ensure cart object exists before trying to initialize
            if (!window.cart) {
                console.error('Cart object not defined on window');
                // Create a new cart object if it doesn't exist
                window.cart = {
                    items: [],
                    init: function() { 
                        console.log('Using created init'); 
                        try {
                            const savedCart = localStorage.getItem('cart');
                            console.log('Saved cart from localStorage:', savedCart);
                            if (savedCart) {
                                this.items = JSON.parse(savedCart);
                                this.updateCartCount();
                            }
                        } catch (error) {
                            console.error('Error in cart init:', error);
                        }
                    },
                    addItem: function(item) {
                        console.log('Using created addItem', item);
                        this.items = this.items || [];
                        this.items.push(item);
                        // Try to save to localStorage
                        try {
                            localStorage.setItem('cart', JSON.stringify(this.items));
                        } catch (e) {
                            console.error('Error saving to localStorage:', e);
                        }
                        return true;
                    },
                    saveCart: function() { 
                        console.log('Using created saveCart');
                        try {
                            localStorage.setItem('cart', JSON.stringify(this.items));
                        } catch (e) {
                            console.error('Error saving to localStorage:', e);
                        }
                    },
                    updateCartCount: function() { 
                        console.log('Using created updateCartCount');
                        try {
                            const count = this.items.reduce((total, item) => total + item.quantity, 0);
                            const cartCountElement = document.getElementById('cart-count');
                            const mobileCartCountElement = document.getElementById('mobile-cart-count');
                            
                            if (cartCountElement) {
                                cartCountElement.textContent = count;
                            } else {
                                console.error('cart-count element not found');
                            }
                            
                            if (mobileCartCountElement) {
                                mobileCartCountElement.textContent = count;
                            } else {
                                console.error('mobile-cart-count element not found');
                            }
                            
                            console.log('Cart count updated in UI');
                        } catch (error) {
                            console.error('Error updating cart count:', error);
                        }
                    },
                    showNotification: function(msg, type = 'success') { 
                        console.log('Notification:', msg);
                        // Create notification element
                        const notification = document.createElement('div');
                        notification.className = `fixed bottom-4 right-4 z-50 p-4 rounded-lg shadow-xl transition-all transform translate-y-full opacity-0 ${type === 'success' ? 'bg-gradient-to-r from-green-500 to-teal-500 text-white' : 'bg-gradient-to-r from-red-500 to-pink-500 text-white'}`;
                        notification.innerHTML = `
                            <div class="flex items-center">
                                <div class="flex-shrink-0 bg-white bg-opacity-20 rounded-full p-2">
                                    <i data-lucide="${type === 'success' ? 'check-circle' : 'alert-circle'}" class="w-5 h-5"></i>
                                </div>
                                <div class="ml-3">
                                    <p class="text-sm font-medium">${msg}</p>
                                </div>
                                <div class="ml-auto pl-3">
                                    <button type="button" class="inline-flex text-white hover:text-gray-200 transition-colors duration-200">
                                        <i data-lucide="x" class="w-5 h-5"></i>
                                    </button>
                                </div>
                            </div>
                        `;
                        
                        // Add to DOM
                        document.body.appendChild(notification);
                        
                        // Initialize Lucide icons if available
                        if (typeof lucide !== 'undefined') {
                            lucide.createIcons({
                                icons: {
                                    'check-circle': lucide.icons['check-circle'],
                                    'alert-circle': lucide.icons['alert-circle'],
                                    'x': lucide.icons['x']
                                },
                                attrs: {
                                    class: "w-5 h-5"
                                }
                            }, notification);
                        }
                        
                        // Add close button functionality
                        const closeButton = notification.querySelector('button');
                        if (closeButton) {
                            closeButton.addEventListener('click', () => {
                                notification.classList.add('translate-y-full', 'opacity-0');
                                setTimeout(() => {
                                    notification.remove();
                                }, 300);
                            });
                        }
                        
                        // Animate in
                        setTimeout(() => {
                            notification.classList.remove('translate-y-full', 'opacity-0');
                            notification.classList.add('translate-y-0', 'opacity-100');
                        }, 10);
                        
                        // Auto remove after 5 seconds
                        setTimeout(() => {
                            notification.classList.remove('translate-y-0', 'opacity-100');
                            notification.classList.add('translate-y-full', 'opacity-0');
                            setTimeout(() => {
                                notification.remove();
                            }, 300);
                        }, 5000);
                    }
                };
            }
            
            try {
                window.cart.init();
                console.log('Cart initialized successfully');
            } catch (error) {
                console.error('Error initializing cart:', error);
                // Create a fallback cart if initialization fails
                console.log('Creating fallback cart');
                window.cart = window.cart || {};
                window.cart.items = window.cart.items || [];
                
                // Try to load saved cart items from localStorage in fallback
                try {
                    const savedCart = localStorage.getItem('cart');
                    if (savedCart) {
                        window.cart.items = JSON.parse(savedCart);
                    }
                } catch (error) {
                    console.error('Error loading saved cart in fallback:', error);
                }
                window.cart.init = window.cart.init || function() { 
                    console.log('Using fallback init'); 
                    // Call updateCartCount to refresh the UI
                    if (typeof this.updateCartCount === 'function') {
                        this.updateCartCount();
                    }
                };
                window.cart.addItem = window.cart.addItem || function(item) {
                    console.log('Using fallback addItem', item);
                    this.items.push(item);
                    return true;
                };
                window.cart.saveCart = window.cart.saveCart || function() { 
                    console.log('Using fallback saveCart'); 
                    try {
                        localStorage.setItem('cart', JSON.stringify(this.items));
                    } catch (e) {
                        console.error('Error saving cart:', e);
                    }
                };
                window.cart.updateCartCount = window.cart.updateCartCount || function() {
                    console.log('Using fallback updateCartCount');
                    try {
                        const count = this.items.reduce((total, item) => total + (item.quantity || 1), 0);
                        const cartCountElement = document.getElementById('cart-count');
                        const mobileCartCountElement = document.getElementById('mobile-cart-count');
                        
                        if (cartCountElement) {
                            cartCountElement.textContent = count;
                        } else {
                            console.error('cart-count element not found');
                        }
                        
                        if (mobileCartCountElement) {
                            mobileCartCountElement.textContent = count;
                        } else {
                            console.error('mobile-cart-count element not found');
                        }
                        
                        console.log('Cart count updated in UI');
                    } catch (error) {
                        console.error('Error updating cart count:', error);
                    }
                };
                window.cart.showNotification = window.cart.showNotification || function(msg, type = 'success') { 
                    console.log('Notification:', msg);
                    // Create notification element
                    const notification = document.createElement('div');
                    notification.className = `fixed bottom-4 right-4 z-50 p-4 rounded-lg shadow-xl transition-all transform translate-y-full opacity-0 ${type === 'success' ? 'bg-gradient-to-r from-green-500 to-teal-500 text-white' : 'bg-gradient-to-r from-red-500 to-pink-500 text-white'}`;
                    notification.innerHTML = `
                        <div class="flex items-center">
                            <div class="flex-shrink-0 bg-white bg-opacity-20 rounded-full p-2">
                                <i data-lucide="${type === 'success' ? 'check-circle' : 'alert-circle'}" class="w-5 h-5"></i>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm font-medium">${msg}</p>
                            </div>
                            <div class="ml-auto pl-3">
                                <button type="button" class="inline-flex text-white hover:text-gray-200 transition-colors duration-200">
                                    <i data-lucide="x" class="w-5 h-5"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    
                    // Add to DOM
                    document.body.appendChild(notification);
                    
                    // Initialize Lucide icons if available
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons({
                            icons: {
                                'check-circle': lucide.icons['check-circle'],
                                'alert-circle': lucide.icons['alert-circle'],
                                'x': lucide.icons['x']
                            },
                            attrs: {
                                class: "w-5 h-5"
                            }
                        }, notification);
                    }
                    
                    // Add close button functionality
                    const closeButton = notification.querySelector('button');
                    if (closeButton) {
                        closeButton.addEventListener('click', () => {
                            notification.classList.add('translate-y-full', 'opacity-0');
                            setTimeout(() => {
                                notification.remove();
                            }, 300);
                        });
                    }
                    
                    // Animate in
                    setTimeout(() => {
                        notification.classList.remove('translate-y-full', 'opacity-0');
                        notification.classList.add('translate-y-0', 'opacity-100');
                    }, 10);
                    
                    // Auto remove after 5 seconds
                    setTimeout(() => {
                        notification.classList.remove('translate-y-0', 'opacity-100');
                        notification.classList.add('translate-y-full', 'opacity-0');
                        setTimeout(() => {
                            notification.remove();
                        }, 300);
                    }, 5000);
                };
            }
            
            // Verify cart is properly initialized
            console.log('Cart initialization complete, cart object:', window.cart);
        });
    </script>

    <!-- Custom Portfolio Animations JS -->
    <script src="{% static 'js/portfolio-animations.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>